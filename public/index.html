<!doctype html>
<html>
<head>
    <title>My Imageboard</title>
    <link rel="stylesheet" href="/css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
</head>
<body>

    
    
    <div id="main">
        <h1 class="title">My Imageboard</h1>
        <h2 class="latest-images">latest images</h2>

<!-- /////////////////////////  IMAGE CARD COMPONENT////////////////////////// -->
        <image-card 
        v-if="current_id" 
        :current_id="current_id"
        :current_image="current_image"
        :comments="comments"

         @close='closeModal' 
         @get="getComments"
         ></image-card>
<!-- ///////////////////////////////////////////////////////////////////////// -->
        <div>
            <form>
                <input v-model='title' type="text" name='title' placeholder='title'>
                <input v-model='description' type="text" name='description' placeholder='description'>
                <input v-model='username' type="text" name='username' placeholder='username'>
                <input @change='handleChange' type="file" name='file' accept='image/*'>
            <button @click='handleClick'>submit</button>
        </form>
    </div>

    <div class="content" >
        <div  @click='getCurId(item.id)' class="images-content" v-for='item in images'>
            
            <img :src=item.url alt="img" >

            <div class="images-title">
                <p >{{item.title}}</p>
            </div>

        </div>
        <button @click='getMoreImages' class="more-btn">more...</button>
    </div>

</div>



<!-- ///////////////////////// IMAGE CARD TEMPLATE////////////////////////// -->
<script  id="image-card-template" type="text/x-template" >
       <div  class="card-container" >

           <div v-for="info in current_image"  class="card-overlay">

                <div class="image-container">
                   <img :src=info.url alt="img" @click='closeCard' class="image-card">
                   <h2>{{info.title}}</h2>
                   <p>{{info.description}}</p>
                   <p>Uploaded by {{info.username}} on {{info.created_at}}</p>
                </div>
                
                 <div class="add-comment-container">
                       <p>add a comment!</p>
                       <form>
                           <input v-model='comment' type="text" id="comment" 
                           placeholder="comment" >>
                           <input v-model='username' type="text" id="username" placeholder="Username" >
                           <button @click='getComment' class="Submit-comment-btn" >Submit</button>
                        </form>
                </div>

                <div  v-for="comment in comments" class='comments'>
                    <span>{{comment.comment}}</span>
                  |  <span>{{comment.comment_username}}</span>
                </div>        
            </div>
       </div>
</script>
<!-- ///////////////////////// IMAGE CARD TEMPLATE////////////////////////// -->

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/image-card-component.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>
